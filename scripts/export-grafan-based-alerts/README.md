# Export Grafana-based Alerts Script

## Для чего нужен

Скрипт предназначен для автоматического создания документации по Grafana алертам в формате Markdown. Он сканирует директории с YAML файлами алертов, извлекает из них информацию (название, описание) и генерирует читаемую документацию.

Основные задачи:
- Формирование простого README файла в папке с алертами.
- Создание ZIP архива с алертами и документацией для экспорта

## Что получим на выходе

### Документация (README.md)
В каждой обработанной директории создается файл `README.md` со структурой:
```markdown
# [Название группы] Алерты

### 1. [Название алерта]
**Описание:** [Описание из annotations]  
**Файл:** [`filename.yml`](filename.yml)

### 2. [Следующий алерт]
...
```

### ZIP архив (опционально)
При использовании флага `-zip` создается файл `alerts.zip`, содержащий:
- Все YAML файлы алертов из обработанных директорий
- Сгенерированные README.md файлы для каждой директории

## Как использовать

### Основные режимы работы

1. **Обработка одной директории:**
```bash
go run . -dir /path/to/alerts
```

2. **Рекурсивная обработка поддиректорий:**
```bash
go run . -dir /path/to/root -r
```

3. **Обработка конкретных директорий:**
```bash
go run . -dir /path/to/root -dirs "feeds-team-http,feeds-team-kafka"
```

4. **Создание ZIP архива:**
```bash
go run . -dir /path/to/alerts -zip
```

### Параметры командной строки

- `-dir` - Корневая директория с YAML файлами алертов (по умолчанию: текущая директория)
- `-dirs` - Список конкретных директорий через запятую для обработки
- `-r` - Рекурсивно обходить поддиректории
- `-zip` - Создать ZIP архив с алертами и документацией

### Требования к файлам

Скрипт ищет файлы с расширением `.yml` и ожидает структуру Grafana алертов:
```yaml
title: "Название алерта"
annotations:
  description: "Описание алерта"  # или summary
  # другие аннотации...
```